{"remainingRequest":"/Users/jiyu/midori/manga/client/node_modules/babel-loader/lib/index.js!/Users/jiyu/midori/manga/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/jiyu/midori/manga/client/src/main.js","dependencies":[{"path":"/Users/jiyu/midori/manga/client/src/main.js","mtime":1538224386901},{"path":"/Users/jiyu/midori/manga/client/node_modules/cache-loader/dist/cjs.js","mtime":1538224308710},{"path":"/Users/jiyu/midori/manga/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jiyu/midori/manga/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n\n/* eslint-disable */\nprocess.title = \"glot-client\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport i18n from './i18n';\nimport router from './router';\nimport store from './store';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\naxios.defaults.timeout = 3000;\nVue.use(VueAxios, axios);\nimport Loading from 'vue-loading-overlay';\nimport 'vue-loading-overlay/dist/vue-loading.min.css';\nVue.use(Loading);\nimport BootstrapVue from 'bootstrap-vue';\nVue.use(BootstrapVue);\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-vue/dist/bootstrap-vue.css';\nimport Toasted from 'vue-toasted';\nVue.use(Toasted);\nimport VueClipboard from 'vue-clipboard2';\nVue.use(VueClipboard);\nVue.config.productionTip = false;\nVue.mixin({\n  methods: {\n    rpc: function rpc(table, method) {\n      var _this = this;\n\n      var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var loading_overlay = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var url = this.$store.getters.db_url + table + \"/\" + method;\n      var data = {\n        jsonrpc: \"2.0\",\n        method: \"login\",\n        params: params\n      };\n      var error_count = 0;\n      var interval = 100;\n\n      if (loading_overlay) {\n        this.$store.state.loader = this.$loading.show();\n      }\n\n      return new Promise(function (resolve, reject) {\n        var loop = setInterval(function () {\n          if (params == null || params.token !== null) {\n            clearInterval(loop);\n\n            _this.axios.post(url, data).then(function (r) {\n              var result = JSON.parse(r.data).result;\n              resolve(result);\n            }).catch(function (e) {\n              reject(e);\n            }).finally(function (r) {\n              if (_this.$store.state.loader != null) {\n                _this.$store.state.loader.hide();\n              }\n            });\n          } else {\n            if (++error_count >= 3000 / interval) {\n              clearInterval(loop);\n\n              _this.$router.push(\"/\");\n            }\n\n            params.token = _this.$store.state.token;\n          }\n        }, interval);\n      });\n    }\n  }\n});\nrouter.beforeEach(function (to, from, next) {\n  if (store.state.loader != null) {\n    store.state.loader.hide();\n  }\n\n  next();\n});\nnew Vue({\n  i18n: i18n,\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["/Users/jiyu/midori/manga/client/src/main.js"],"names":["process","title","Vue","App","i18n","router","store","axios","VueAxios","defaults","timeout","use","Loading","BootstrapVue","Toasted","VueClipboard","config","productionTip","mixin","methods","rpc","table","method","params","loading_overlay","url","$store","getters","db_url","data","jsonrpc","error_count","interval","state","loader","$loading","show","Promise","resolve","reject","loop","setInterval","token","clearInterval","post","then","r","result","JSON","parse","catch","e","finally","hide","$router","push","beforeEach","to","from","next","render","h","$mount"],"mappings":"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","sourcesContent":["/* eslint-disable */\nprocess.title = \"glot-client\"\n\nimport Vue from 'vue'\nimport App from './App.vue'\nimport i18n from './i18n'\nimport router from './router'\nimport store from './store'\n\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\naxios.defaults.timeout = 3000;\nVue.use(VueAxios, axios)\n\nimport Loading from 'vue-loading-overlay'\nimport 'vue-loading-overlay/dist/vue-loading.min.css'\nVue.use(Loading)\n\nimport BootstrapVue from 'bootstrap-vue'\nVue.use(BootstrapVue);\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nimport Toasted from 'vue-toasted';\nVue.use(Toasted)\n\nimport VueClipboard from 'vue-clipboard2'\nVue.use(VueClipboard)\n\nVue.config.productionTip = false\n\nVue.mixin({\n\tmethods: {\n\t\trpc(table, method, params = null, loading_overlay = false) {\n\t\t\tlet url = this.$store.getters.db_url + table + \"/\" + method\n\t\t\tlet data = {\n\t\t\t\tjsonrpc: \"2.0\",\n\t\t\t\tmethod: \"login\",\n\t\t\t\tparams: params\n\t\t\t}\n\t\t\tlet error_count = 0\n\t\t\tlet interval = 100\n\n\t\t\tif (loading_overlay) {\n\t\t\t\tthis.$store.state.loader = this.$loading.show()\n\t\t\t}\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet loop = setInterval(() => {\n\t\t\t\t\tif (params == null || params.token !== null) {\n\t\t\t\t\t\tclearInterval(loop)\n\n\t\t\t\t\t\tthis.axios.post(\n\t\t\t\t\t\t\turl, data\n\t\t\t\t\t\t).then(r => {\n\t\t\t\t\t\t\tlet result = JSON.parse(r.data).result\n\t\t\t\t\t\t\tresolve(result)\n\t\t\t\t\t\t}).catch(e => {\n\t\t\t\t\t\t\treject(e)\n\t\t\t\t\t\t}).finally(r => {\n\t\t\t\t\t\t\tif (this.$store.state.loader != null) {\n\t\t\t\t\t\t\t\tthis.$store.state.loader.hide()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (++error_count >= (3000 / interval)) {\n\t\t\t\t\t\t\tclearInterval(loop)\n\t\t\t\t\t\t\tthis.$router.push(\"/\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparams.token = this.$store.state.token\n\t\t\t\t\t}\n\t\t\t\t}, interval)\n\t\t\t})\n\t\t}\n\t}\n})\n\nrouter.beforeEach((to, from, next) => {\n\tif (store.state.loader != null) {\n\t\tstore.state.loader.hide()\n\t}\n\tnext()\n})\n\nnew Vue({\n\ti18n,\n\trouter,\n\tstore,\n\trender: h => h(App)\n}).$mount('#app')\n\n"]}]}